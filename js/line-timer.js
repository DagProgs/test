fetch("js/json/prayer-times.json").then(t=>t.json()).then(t=>{var e=t,r=[];r.push("Фаджр"),r.push("Шурук"),r.push("Зухр"),r.push("Аср"),r.push("Магриб"),r.push("Иша");var $={Фаджр:"Fajr",Шурук:"Sunrise",Зухр:"Dhuhr",Аср:"Asr",Магриб:"Maghrib",Иша:"Isha"},n=new Date,a=n.getMonth()+1,s=n.getDate(),o=60*n.getHours()+n.getMinutes(),i={};e[a]&&e[a][s]&&r.forEach(function(t){var r=$[t];r&&e[a][s][r]&&(i[t]=60*e[a][s][r][0]+e[a][s][r][1])});var u=new Date;u.setDate(u.getDate()+1),u.setHours(0,0,0,0);var h=60*u.getHours()+u.getMinutes();if(o>i["Магриб"]){var g=e[a][s+0];g&&r.forEach(function(t){var e=$[t];e&&g[e]&&(i[t]=60*g[e][0]+g[e][1])})}function v(t,e){var r=e-t;return r<=0?"00:00":Math.floor(r/60).toString().padStart(2,"0")+":"+(r%60).toString().padStart(2,"0")}function _(){for(var t=new Date,e=60*t.getHours()+t.getMinutes(),n=document.getElementById("timeToNextPrayer"),a=document.getElementById("redLine"),s=!1,o=1/0,u=0;u<r.length;u++){var h=r[u],g=i[h];if(void 0!==g&&g>e){var _=g-e;_<o&&(o=_,d=h,s=!0)}}if(s){"Фаджр"===d&&e>i["Иша"]?(f=v(e,i["Фаджр"]+1440),p=i["Фаджр"]-i["Иша"]+1440):(f=v(e,i[d]),p=i[d]-i[r[r.indexOf(d)-1]]),n.textContent="Осталось до "+d+"а - "+f;var d,f,p,l=o/p*100;a.style.width=100-l+"%";var y=document.getElementById($[d].toLowerCase()+"prayerTimes");y&&y.classList.add("current-prayer")}else{var c=v(e,i["Фаджр"]+1440);n.textContent="До Фаджра "+c,a.style.width="0"}}setInterval(_,1e3),_()});