<!DOCTYPE html>
<html>
<head>
    <title>Пример уведомлений о намазе</title>
</head>
<body>
    <h1>Получение уведомлений о намазе</h1>

    <script>
        fetch('prayer-times.json')
            .then(response => response.json())
            .then(data => {
                const today = new Date();
                const dayOfMonth = today.getDate().toString();
                
                // Получаем времена намазов для текущего дня
                const prayerTimesToday = data[dayOfMonth];
                
                if (prayerTimesToday) {
                    const currentTime = today.getHours() * 60 + today.getMinutes();

                    // Пройдемся по всем намазам на текущий день и отправим уведомление, если время наступило
                    for (const prayerTime in prayerTimesToday) {
                        const prayerName = prayerTime;
                        const prayerStartTime = prayerTimesToday[prayerTime][0] * 60 + prayerTimesToday[prayerTime][1];

                        if (currentTime === prayerStartTime) {
                            // Отправка уведомления
                            if ('Notification' in window) {
                                Notification.requestPermission().then(function(permission) {
                                    if (permission === 'granted') {
                                        new Notification(`Время для намаза ${prayerName}!`, {
                                            body: 'Приготовьтесь к выполнению намаза.',
                                        });
                                    }
                                });
                            }
                        }
                    }
                } else {
                    console.log('Для текущего дня нет данных о времени намазов в файле.');
                }
            })
            .catch(error => {
                console.error('Ошибка при загрузке данных:', error);
            });
    </script>
</body>
</html>
