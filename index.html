<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json" />
    <title>Document</title>
</head>
<body>
    <button onclick="requestNotificationPermission()">Разрешить уведомления</button>
    <script>
        // Функция запроса разрешения на уведомления
        async function requestNotificationPermission() {
            if (Notification.permission !== 'granted') {
                const permission = await Notification.requestPermission();
                if (permission === 'granted') {
                    console.log('Разрешение на уведомления получено');
                }
            }
        }
    </script>
    <script>
       // Загрузка данных из файла в переменную prayerTimes
const prayerTimes = {
    "3": {
        "23": {
            "Fajr": [15, 34],
            "Sunrise": [15, 36],
            "Dhuhr": [15, 38],
            "Asr": [15, 40],
            "Maghrib": [15, 42],
            "Isha": [15, 58]
        }
    }
};

// Функция для отправки уведомления
function showNotification(title, body) {
    if (Notification.permission === 'granted') {
        new Notification(title, { body: body });
    }
}

// Функция для проверки времени намаза и отправки уведомления при необходимости
function checkPrayerTimes() {
    const currentDate = new Date();
    const currentDay = currentDate.getDate();
    const currentMonth = currentDate.getMonth() + 1;

    if (prayerTimes[currentMonth] && prayerTimes[currentMonth][currentDay]) {
        for (const prayer in prayerTimes[currentMonth][currentDay]) {
            const prayerTime = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDay, prayerTimes[currentMonth][currentDay][prayer][0], prayerTimes[currentMonth][currentDay][prayer][1]);

            if (currentDate.getTime() >= prayerTime.getTime() && currentDate.getTime() < prayerTime.getTime() + 60000) {
                showNotification("Намаз", "Пришло время для " + prayer);
            }
        }
    }
}

// Установка интервала для проверки времени намазов
setInterval(checkPrayerTimes, 60000);


    </script>
</body>
</html>