<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qibla Compass</title>
<style>
#compass {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: linear-gradient(to right, #3498db, #e74c3c);
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  color: #fff;
}
</style>
</head>
<body>
<div id="compass"></div>
<script>
const compass = document.getElementById('compass');

function getQiblaAngle(latitude, longitude) {
  const qiblaLatitude = 21.422487; // Координаты Каабы в Мекке
  const qiblaLongitude = 39.826206;

  const y = Math.sin(qiblaLongitude - longitude) * Math.cos(qiblaLatitude);
  const x = Math.cos(latitude) * Math.sin(qiblaLatitude) - Math.sin(latitude) * Math.cos(qiblaLatitude) * Math.cos(qiblaLongitude - longitude);
  const angle = Math.atan2(y, x) * (180/Math.PI);
  
  compass.style.transform = `rotate(${angle}deg)`;
  compass.innerText = `Qibla: ${angle.toFixed(2)}°`;
}

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(position => {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;
      getQiblaAngle(latitude, longitude);
    });
  } else {
    compass.innerText = "Геолокация не поддерживается";
  }
}

getLocation();
</script>
</body>
</html>
